# Інструкція з використання CI/CD для деплою на Docker Hub

## Огляд
У проекті налаштовані два окремі робочі процеси CI/CD для автоматичного деплою backend та frontend додатків на Docker Hub. Обидва процеси запускаються при створенні git-тегів з відповідними префіксами.

## Структура тегів
- `be-v*.*.*` - теги для деплою **backend** (наприклад, `be-v1.0.0`)
- `fe-v*.*.*` - теги для деплою **frontend** (наприклад, `fe-v1.0.0`)

## Процес деплою

### Backend
1. Створіть тег формату `be-v*.*.*` (наприклад, `be-v1.2.3`)
2. Виконайте push тегу в репозиторій
3. Автоматично запуститься workflow, який збере Docker-образ з папки `backend` і відправить його в Docker Hub з тегом `dreemix/price-app-b2b:v*.*.*-<git-hash>`

### Frontend
1. Створіть тег формату `fe-v*.*.*` (наприклад, `fe-v1.2.3`)
2. Виконайте push тегу в репозиторій
3. Автоматично запуститься workflow, який збере Docker-образ з папки `frontend` і відправить його в Docker Hub з тегом `dreemix/b2b-front:v*.*.*-<git-hash>`

## Приклад створення тегу
```bash
# Для backend
git tag be-v1.0.0
git push origin be-v1.0.0

# Для frontend
git tag fe-v2.0.0
git push origin fe-v2.0.0
```

## Розгортання за допомогою Helm

Для розгортання застосунків у Kubernetes використовуйте Helm-чарт, розташований в директорії `charts/b2b-app`.

### Встановлення чарту

```bash
cd charts
helm install b2b ./b2b-app
```

### Оновлення версій образів

Після успішного деплою нових версій образів на Docker Hub, необхідно оновити значення `tag` у файлі `my-values.yaml`:

```yaml
backend:
  image:
    tag: "v1.2.3-abcdef"  # Нова версія бекенду

frontend:
  image:
    tag: "v2.0.1-abcdef"  # Нова версія фронтенду
```

Потім застосуйте оновлення:

```bash
helm upgrade b2b ./b2b-app -f my-values.yaml
```

Додаткова інформація про Helm-чарт та його параметри знаходиться в файлі `charts/b2b-app/README.md`. 